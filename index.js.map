{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst instance = axios.create({\n  baseURL: 'https://pixabay.com/api',\n  params: {\n    key: '49097244-8862dd375f26540a0b3f58369',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  },\n});\n\nexport async function getImages(searchName, page, perPage) {\n  const response = await instance.get('/', {\n    params: { q: searchName, page: page, per_page: perPage },\n  });\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nconst gallery = document.querySelector('.gallery');\n\nexport function showGallery(images) {\n  const galleryMarkup = images\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n          />\n        </a>\n        <ul class=\"image-info\">\n          <li>\n            <h5>Likes</h5>\n            <p>${likes}</p>\n          </li>\n          <li>\n            <h5>Views</h5>\n            <p>${views}</p>\n          </li>\n          <li>\n            <h5>Comments</h5>\n            <p>${comments}</p></p>\n          </li>\n          <li>\n            <h5>Downloads</h5>\n            <p>${downloads}</p>\n          </li>\n        </ul>\n      </li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', galleryMarkup);\n\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImages } from './js/pixabay-api';\nimport { showGallery, clearGallery } from './js/render-functions';\n\nconst refs = {\n  searchForm: document.querySelector('#search-form'),\n  searchInput: document.querySelector('#search-input'),\n  gallery: document.querySelector('.gallery'),\n  jsLoader: document.querySelector('.js-loader'),\n  loadBtn: document.querySelector('.load-btn'),\n};\n\nlet searchName = '';\nlet page = 1;\nlet perPage = 40;\nlet totalHits = 0;\n\nrefs.searchForm.addEventListener('submit', handleSubmit);\nrefs.loadBtn.addEventListener('click', handleLoadMore);\n\nasync function handleSubmit(e) {\n  e.preventDefault();\n  clearGallery();\n  page = 1;\n  totalHits = 0;\n  hideLoadBtn();\n\n  searchName = e.target.elements.query.value.trim();\n\n  if (!searchName) {\n    warningMsg('Please fill in the field!');\n    return;\n  }\n\n  showLoader();\n\n  try {\n    const data = await getImages(searchName, page, perPage);\n    totalHits = data.totalHits;\n\n    if (!data.hits.length) {\n      errorMsg(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    showGallery(data.hits);\n    if (page * perPage < totalHits) {\n      showLoadBtn();\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    errorMsg('Something went wrong. Please try again.');\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function handleLoadMore() {\n  page += 1;\n  showLoader();\n\n  try {\n    const data = await getImages(searchName, page, perPage);\n    showGallery(data.hits);\n    scrollGallery();\n\n    if (page * perPage >= totalHits) {\n      hideLoadBtn();\n      warningMsg(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    console.error('Error fetching more images:', error);\n    errorMsg('Something went wrong while loading more images.');\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction showLoader() {\n  refs.jsLoader.innerHTML = '<span class=\"loader\"></span>';\n}\n\nfunction hideLoader() {\n  refs.jsLoader.textContent = '';\n}\n\nfunction showLoadBtn() {\n  refs.loadBtn.classList.remove('hidden');\n}\n\nfunction hideLoadBtn() {\n  refs.loadBtn.classList.add('hidden');\n}\n\nfunction scrollGallery() {\n  const images = refs.gallery.children;\n  if (images.length > 1) {\n    const { height } = images[0].getBoundingClientRect();\n    window.scrollBy({\n      top: height * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n\nfunction warningMsg(message) {\n  iziToast.warning({\n    messageColor: '#fff',\n    backgroundColor: '#6c8cff',\n    theme: 'dark',\n    position: 'topRight',\n\n    message,\n  });\n}\n\nfunction errorMsg(message) {\n  iziToast.error({\n    messageColor: '#fff',\n    backgroundColor: '#ef4040',\n    theme: 'dark',\n    position: 'topRight',\n    message,\n  });\n}\n"],"names":["instance","axios","getImages","searchName","page","perPage","lightbox","SimpleLightbox","gallery","showGallery","images","galleryMarkup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","clearGallery","refs","totalHits","handleSubmit","handleLoadMore","hideLoadBtn","warningMsg","showLoader","data","errorMsg","showLoadBtn","error","hideLoader","scrollGallery","height","message","iziToast"],"mappings":"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"}